# EN Bank - سیستم اعتبارسنجی بانکی

## 📋 توضیحات پروژه

این پروژه یک سیستم اعتبارسنجی بانکی است که امکان ورود کاربران دارای حساب بانکی و ثبت‌نام کاربران جدید را فراهم می‌کند. در فرآیند ثبت‌نام، سیستم امضای دیجیتال و ویدیو سلفی از کاربر دریافت کرده و آن‌ها را به سرویس مربوطه ارسال می‌کند.

## 🚀 ویژگی‌های اصلی

### 1. صفحه اصلی

- انتخاب بین ورود (دارای حساب) و ثبت‌نام (حساب جدید)
- طراحی ریسپانسیو با Tailwind CSS
- استفاده از Heroicons

### 2. فرآیند ورود

- ورود شماره حساب و رمز عبور
- اعتبارسنجی اطلاعات
- هدایت به صفحه تأیید هویت

### 3. فرآیند ثبت‌نام

- **مرحله 1**: ثبت اطلاعات شخصی (نام، نام خانوادگی، کد ملی، شماره موبایل، ایمیل)
- **مرحله 2**: انتخاب نوع حساب و مبلغ واریز اولیه
- هدایت به مرحله تأیید هویت

### 4. تأیید هویت

- **ضبط امضای دیجیتال**: استفاده از `react-signature-canvas`
- **ضبط ویدیو سلفی**: دسترسی به دوربین و ضبط ویدیو 10 ثانیه‌ای
- اعتبارسنجی و ارسال داده‌ها به سرور

### 5. API Backend

- دریافت و ذخیره امضا و ویدیو
- ارسال داده‌ها به سرویس خارجی
- تولید Reference ID منحصر به فرد

## 🛠 تکنولوژی‌های استفاده شده

- **Frontend**: Next.js 15, React 19, TypeScript
- **UI**: Tailwind CSS, Heroicons
- **امضای دیجیتال**: react-signature-canvas
- **ضبط ویدیو**: MediaRecorder API
- **Package Manager**: Yarn 4

## 📁 ساختار پروژه

```
src/
├── app/
│   ├── page.tsx                 # صفحه اصلی
│   ├── login/
│   │   └── page.tsx            # صفحه ورود
│   ├── register/
│   │   └── page.tsx            # صفحه ثبت‌نام
│   ├── verification/
│   │   └── page.tsx            # صفحه تأیید هویت
│   ├── dashboard/
│   │   └── page.tsx            # صفحه نتیجه نهایی
│   └── api/
│       └── verification/
│           └── route.ts        # API endpoint
├── lib/
│   └── verification.ts         # توابع کمکی
└── components/                 # کامپوننت‌های مشترک
```

## 🚀 راه‌اندازی پروژه

### 1. نصب Dependencies

```bash
yarn install
```

### 2. اجرای پروژه

```bash
yarn dev
```

پروژه روی `http://localhost:3000` اجرا خواهد شد.

### 3. Build برای Production

```bash
yarn build
yarn start
```

## 🔧 تنظیمات

### متغیرهای محیطی (Environment Variables)

```env
NEXT_PUBLIC_BASE_URL=http://localhost:3000
EXTERNAL_SERVICE_URL=https://your-service.com/api
EXTERNAL_SERVICE_API_KEY=your-api-key
```

## 📝 فلو کاربری

### مسیر ورود:

1. صفحه اصلی → انتخاب "ورود"
2. وارد کردن شماره حساب و رمز عبور
3. تأیید هویت (امضا + ویدیو سلفی)
4. تکمیل و نمایش نتیجه

### مسیر ثبت‌نام:

1. صفحه اصلی → انتخاب "ثبت‌نام"
2. مرحله 1: اطلاعات شخصی
3. مرحله 2: اطلاعات حساب بانکی
4. تأیید هویت (امضا + ویدیو سلفی)
5. تکمیل و نمایش نتیجه

## 🔒 امنیت

- اعتبارسنجی داده‌ها در سمت کلاینت و سرور
- ذخیره ایمن فایل‌ها با Reference ID منحصر به فرد
- رمزگذاری ارتباطات (HTTPS در production)

## 📱 ریسپانسیو

- طراحی موبایل فرست
- سازگاری با تمام اندازه‌های صفحه
- UX بهینه برای دستگاه‌های لمسی

## 🎥 ویژگی‌های ویدیو

- دسترسی به دوربین جلو
- ضبط ویدیو با کیفیت 640x480
- حداکثر مدت ضبط: 10 ثانیه
- فرمت خروجی: WebM

## ✍️ ویژگی‌های امضا

- صفحه امضای دیجیتال تعاملی
- امکان پاک کردن و ضبط مجدد
- صادرات به فرمت PNG
- اعتبارسنجی وجود امضا

## 🔄 API Endpoints

### POST /api/verification

- دریافت امضا و ویدیو
- ذخیره فایل‌ها
- ارسال به سرویس خارجی

### GET /api/verification?referenceId=xxx

- بازیابی وضعیت درخواست
- پیگیری فرآیند بررسی

## 🚨 مشکلات رایج

### مشکل دسترسی به دوربین

- بررسی مجوزهای مرورگر
- اطمینان از اجرا روی HTTPS (در production)

### خطای نصب پکیج‌ها

```bash
# حذف node_modules و نصب مجدد
rm -rf node_modules
yarn install
```

## 📞 پشتیبانی

برای هرگونه سوال یا مشکل، با تیم توسعه تماس بگیرید.

## 📄 مجوز

این پروژه تحت مجوز MIT منتشر شده است.
